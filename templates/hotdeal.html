{% extends "base.html" %}
{% block content %}

<div class="container mt-5 mb-5">
    <div class="card shadow-lg border-0 mx-auto" style="max-width: 800px; border-radius: 20px; overflow: hidden;">
        <div class="card-header py-4 text-center text-white" style="background: linear-gradient(135deg, #dc3545 0%, #a71d2a 100%);">
            <h4 class="fw-bold mb-0"><i class="fas fa-fire me-2"></i>뽐뿌 핫딜 알림 설정</h4>
            <p class="mb-0 opacity-75 small mt-1">실시간 핫딜 키워드 매칭 및 텔레그램 알림</p>
        </div>

        <div class="card-body p-4 p-md-5 bg-white">
            <form method="POST">
                <div class="mb-5">
                    <label class="form-label fw-bold text-danger">
                        <i class="fas fa-tags me-1"></i> 알림 키워드 (구분자: |)
                    </label>
                    <input type="text" class="form-control form-control-lg border-2 border-danger-subtle shadow-sm" name="myalim" value="{{ myalim }}" placeholder="예) 11번가|옥션|에어팟|생수">
                    <div class="form-text mt-2 small text-muted">
                        <i class="bi bi-info-circle me-1"></i> 입력한 키워드가 포함된 핫딜 게시글이 올라오면 알림을 보냅니다.
                    </div>
                </div>

                <div class="card border-0 bg-light rounded-4 p-4 mb-5 border-start border-4 border-danger">
                    <h5 class="fw-bold mb-4 text-danger"><i class="fab fa-telegram-plane me-2"></i>알림 수신 및 무음 설정</h5>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label small fw-bold text-muted">텔레그램 사용</label>
                            <select class="form-select border-2 shadow-sm" name="telgm">
                                <option value="True" {% if telgm == 'True' %}selected{% endif %}>사용함 (ON)</option>
                                <option value="False" {% if telgm == 'False' %}selected{% endif %}>사용 안함 (OFF)</option>
                            </select>
                        </div>
                        <div class="col-md-6">
                            <label class="form-label small fw-bold text-muted">특정시간 무음 알림</label>
                            <select class="form-select border-2 shadow-sm" name="telgm_alim">
                                <option value="True" {% if telgm_alim == 'True' %}selected{% endif %}>활성화 (설정시간 무음)</option>
                                <option value="False" {% if telgm_alim == 'False' %}selected{% endif %}>비활성화 (항상 소리)</option>
                            </select>
                        </div>

                        <div class="col-md-6 mt-3">
                            <label class="form-label small fw-bold text-muted">텔레그램 토큰</label>
                            <input type="text" class="form-control border-2 shadow-sm" name="telgm_token" value="{{ telgm_token }}">
                        </div>
                        <div class="col-md-6 mt-3">
                            <label class="form-label small fw-bold text-muted">텔레그램 봇 ID</label>
                            <input type="text" class="form-control border-2 shadow-sm" name="telgm_botid" value="{{ telgm_botid }}">
                        </div>

                        <div class="col-md-6 mt-3">
                            <label class="form-label small fw-bold text-muted">
                                <i class="bi bi-bell-slash-fill me-1"></i> 무음 시작 시간
                            </label>
                            <select class="form-select border-2 shadow-sm" name="start_time2">
                                {% for i in range(0, 24) %}
                                    {% set val = "%02d" % i %}
                                    <option value="{{ val }}" {% if start_time2 == val %}selected{% endif %}>{{ val }}시</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-6 mt-3">
                            <label class="form-label small fw-bold text-muted">
                                <i class="bi bi-bell-fill me-1"></i> 무음 종료 시간
                            </label>
                            <select class="form-select border-2 shadow-sm" name="end_time">
                                {% for i in range(0, 24) %}
                                    {% set val = "%02d" % i %}
                                    <option value="{{ val }}" {% if end_time == val %}selected{% endif %}>{{ val }}시</option>
                                {% endfor %}
                            </select>
                        </div>
                    </div>
                </div>

                <div class="row g-3 mb-5">
                    <div class="col-md-4">
                        <label class="form-label small fw-bold text-muted">실행 주기 (Cron)</label>
                        <input type="text" class="form-control border-2 shadow-sm" name="start_time" value="{{ start_time }}">
                    </div>
                    <div class="col-md-4">
                        <label class="form-label small fw-bold text-muted">스케줄 이름</label>
                        <input type="text" class="form-control bg-light border-2" name="startname" value="hotdeal" readonly>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label small fw-bold text-muted">즉시 실행 여부</label>
                        <select class="form-select border-2 shadow-sm" name="now">
                            <option value="True">예약 실행 (Schedule)</option>
                            <option value="False">지금 즉시 (Now)</option>
                        </select>
                    </div>
                </div>

                <div class="text-center mt-2">
                    <button type="submit" class="btn btn-danger btn-lg px-5 py-3 fw-bold rounded-pill shadow-lg w-100">
                        <i class="fas fa-save me-2"></i> 설정 저장 및 핫딜 추적 시작
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>

<style>
    body { background-color: #f8f9fa; font-family: 'Pretendard', sans-serif; }
    .form-control:focus, .form-select:focus { border-color: #dc3545; box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.15); }
    .card { transition: transform 0.3s; }
    label { letter-spacing: -0.5px; }
</style>

{% endblock %}