{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <div class="card shadow-sm mb-5 border-0">
        <div class="card-header bg-success text-white">
            <h5 class="mb-0">‚ûï Ïã†Í∑ú Ïû¨Í≥† Îì±Î°ù</h5>
        </div>
        <div class="card-body">
            <form action="{{ url_for('sub4.start') }}" method="POST" class="row g-3">
                <div class="col-md-3">
                    <input type="date" class="form-control" name="MY_DATE" required>
                </div>
                <div class="col-md-4">
                    <input type="text" class="form-control" name="PRODUCT_NAME" placeholder="ÏÉÅÌíàÎ™Ö" required>
                </div>
                <div class="col-md-2">
                    <input type="number" class="form-control text-primary" name="RECEIVING" placeholder="ÏûÖÍ≥†Îüâ" value="0">
                </div>
                <div class="col-md-2">
                    <input type="number" class="form-control text-danger" name="SHIPPING" placeholder="Ï∂úÍ≥†Îüâ" value="0">
                </div>
                <div class="col-md-1">
                    <button type="submit" class="btn btn-success w-100">Ï∂îÍ∞Ä</button>
                </div>
            </form>
        </div>
    </div>

    <div class="card shadow-sm border-0">
        <div class="card-header bg-white border-bottom py-3 d-flex justify-content-between align-items-center">
            <h4 class="mb-0 text-dark fw-bold">üìä Ïû¨Í≥† ÌòÑÌô© ÎßàÏä§ÌÑ∞</h4>
            <div>
                <a href="{{ url_for('sub4.csv_import') }}" class="btn btn-sm btn-outline-secondary">ÏóëÏÖÄ ÌååÏùº ÏÉùÏÑ±</a>
                <a href="{{ url_for('sub4.csv_download') }}" class="btn btn-sm btn-outline-primary">Îã§Ïö¥Î°úÎìú</a>
            </div>
        </div>
        <div class="table-responsive">
            <table class="table table-hover align-middle text-center mb-0">
                <thead class="table-light">
                    <tr>
                        <th>Î≤àÌò∏</th>
                        <th>ÎÇ†Ïßú</th>
                        <th>ÏÉÅÌíàÎ™Ö</th>
                        <th class="text-primary">ÏûÖÍ≥†</th>
                        <th class="text-danger">Ï∂úÍ≥†</th>
                        <th class="fw-bold">ÌòÑÏû¨Í≥†</th>
                        <th>Í¥ÄÎ¶¨</th>
                    </tr>
                </thead>
                <tbody>
                    {% for row in rows %}
                    <tr>
                        <td>{{ row["idx"] }}</td>
                        <td class="small">{{ row["MY_DATE"] }}</td>
                        <td class="fw-bold">{{ row["PRODUCT_NAME"] }}</td>
                        <td class="text-primary">+{{ row["RECEIVING"] }}</td>
                        <td class="text-danger">-{{ row["SHIPPING"] }}</td>
                        <td class="bg-light fw-bold">{{ row["TOTAL"] }}</td>
                        <td>
                            <div class="btn-group btn-group-sm">
                                <a href="{{ url_for('sub4.edit', idx=row['idx'], MY_DATE=row['MY_DATE'], PRODUCT_NAME=row['PRODUCT_NAME'], RECEIVING=row['RECEIVING'], SHIPPING=row['SHIPPING'], TOTAL=row['TOTAL']) }}" class="btn btn-outline-dark">ÏàòÏ†ï</a>
                                <a href="{{ url_for('sub4.databasedel', idx=row['idx']) }}" class="btn btn-outline-danger" onclick="return confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')">ÏÇ≠Ï†ú</a>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}